|<h3>**[SCRUM-25] [**Business process**](https://phanthanhdat2505.atlassian.net/browse/SCRUM-25)** Created: 08/Jan/26  Updated: 09/Jan/26 </h3>||
| :- | :- |
|**Status:**|To Do|
|**Project:**|[SWP391](https://phanthanhdat2505.atlassian.net/secure/BrowseProject.jspa?id=10000)|
|**Components:**|None |
|**Affects versions:**|None |
|**Fix versions:**|None |

|**Type:**|Task |**Priority:**|Medium |
| :- | :- | :- | :- |
|**Reporter:**|<a name="word_reporter_712020:8fc4cff0-3a3e-48ab-8143-962316089197"></a>[duck ](https://phanthanhdat2505.atlassian.net/secure/ViewProfile.jspa?accountId=712020%3A8fc4cff0-3a3e-48ab-8143-962316089197)|**Assignee:**|Unassigned |
|**Resolution:**|Unresolved |**Votes:**|0 |
|**Labels:**|None |||
|**Remaining Estimate:**|Not Specified |||
|**Time Spent:**|Not Specified |||
|**Original estimate:**|Not Specified |||

|**Rank:**|0|i00027: |
| :- | :- |
|**Sprint:**||

|` `**Description**  | |
| :-: | :- |

|<p>**BUSINESS PROCESS**</p><p>**BP1 - Đăng tin mua bán xe đạp thể thao**</p><p>- Mục tiêu: </p><p>&emsp;- Cho phép **Seller** tạo và đăng tin bán xe đạp thể thao lên hệ thống</p><p>&emsp;- Cung cấp đầy đủ thông tin cần thiết để **Buyer** có thể tìm kiếm, xem và thực hiện giao dịch một cách minh bạch và an toàn.</p><p>&emsp;- Cung cấp đầy đủ thông tin để **Inspector** kiểm định chất lượng xe trước khi đến tay người dùng.</p><p>- End-user: </p><p>&emsp;- **Seller** (Người bán)</p><p>&emsp;- **Inspector** (Người kiểm duyệt xe/tin đăng)</p><p>- Pre-Condition: </p><p>&emsp;- Seller đã đăng ký và đăng nhập vào hệ thống</p><p>&emsp;- Tài khoản Seller đang ở trạng thái hoạt động</p><p>- Post-condition: </p><p>&emsp;- Tin đăng được lưu vào hệ thống</p><p>&emsp;- Tin đăng có trạng thái: </p><p>&emsp;&emsp;- **Chờ duyệt** (nếu cần kiểm duyệt)</p><p>&emsp;&emsp;- Hoặc **Đang hiển thị** (sau khi được Admin duyệt)</p><p>- Procces: </p><p>&emsp;- Seller chọn chức năng **“Đăng tin bán xe”**</p><p>&emsp;- Hệ thống hiển thị form đăng tin</p><p>&emsp;- Seller nhập thông tin xe: </p><p>&emsp;&emsp;- Loại xe</p><p>&emsp;&emsp;- Hãng</p><p>&emsp;&emsp;- Giá bán</p><p>&emsp;&emsp;- Tình trạng xe</p><p>&emsp;&emsp;- Mô tả ngắn</p><p>&emsp;- Seller upload hình ảnh xe (tối thiểu 3 ảnh)</p><p>&emsp;- Seller xác nhận đăng tin</p><p>&emsp;- Hệ thống lưu tin đăng với trạng thái **“Chờ duyệt”**</p><p>&emsp;- **Inspector** kiểm duyệt tin đăng</p><p>&emsp;- **Inspector** chấp nhận tin đăng</p><p>&emsp;- Hệ thống chuyển trạng thái tin sang **“Đang bán”** và hiển thị cho Buyer</p><p>- Business Rule: </p><p>&emsp;- Mỗi tin đăng phải có tối thiểu **3 hình ảnh**</p><p>&emsp;- Giá bán phải là số dương</p><p>&emsp;- Tin đăng phải được Admin duyệt trước khi hiển thị</p><p>- Alternative Flow: </p><p>&emsp;- A1 — Seller hủy thao tác trước khi đăng </p><p>&emsp;&emsp;- Trigger: Seller bấm “Hủy/Thoát” hoặc back.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- Nếu có “nháp”: lưu DRAFT</p><p>&emsp;&emsp;&emsp;- Nếu không: discard</p><p>&emsp;&emsp;- Outcome: không tạo tin ở PENDING\_APPROVAL.</p><p>&emsp;- A2 — Lưu nháp (khuyến nghị cho UX) </p><p>&emsp;&emsp;- Trigger: Seller bấm “Lưu nháp”.</p><p>&emsp;&emsp;- System: lưu tin ở DRAFT, ảnh upload lưu tạm.</p><p>&emsp;&emsp;- Outcome: Seller có thể quay lại chỉnh sửa và “Đăng”.</p><p>&emsp;- A3 — Tin bị đánh dấu “cần bổ sung” thay vì chỉ “chờ duyệt” </p><p>&emsp;&emsp;- Trigger: hệ thống detect thiếu/khả nghi (ví dụ ảnh mờ, mô tả quá ngắn).</p><p>&emsp;&emsp;- System: set status NEED\_MORE\_INFO (hoặc vẫn PENDING\_APPROVAL nhưng có flag).</p><p>&emsp;&emsp;- Outcome: Inspector sẽ ưu tiên hỏi thêm (kết nối BP4B).</p><p>&emsp;- E1 — Thiếu ảnh / < 3 ảnh </p><p>&emsp;&emsp;- Trigger: Seller bấm đăng khi ảnh < 3.</p><p>&emsp;&emsp;- System: chặn submit, highlight trường ảnh, hiển thị message.</p><p>&emsp;&emsp;- Outcome: không lưu hoặc chỉ lưu nháp.</p><p>&emsp;- E2 — Giá không hợp lệ (<=0, ký tự) </p><p>&emsp;&emsp;- Trigger: Seller nhập giá sai.</p><p>&emsp;&emsp;- System: validate phía client + server, trả lỗi rõ ràng.</p><p>&emsp;&emsp;- Outcome: không tạo tin.</p><p>&emsp;- E3 — Upload ảnh lỗi (mạng/định dạng/kích thước) </p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- Thông báo ảnh nào lỗi, cho retry từng ảnh</p><p>&emsp;&emsp;&emsp;- Không cho submit nếu ảnh hợp lệ < 3</p><p>&emsp;&emsp;- Outcome: tránh tạo tin “rỗng ảnh”.</p><p>&emsp;- E4 — Tài khoản Seller bị khóa/không active </p><p>&emsp;&emsp;- System: chặn tạo tin, hướng dẫn liên hệ support.</p><p>&emsp;&emsp;- Outcome: không tạo tin.</p><p>**BP2 - Kiểm duyệt tin đăng mua bán xe đạp thể thao**</p><p>- Mục tiêu: </p><p>&emsp;- Đảm bảo các tin đăng mua bán xe trên hệ thống có nội dung hợp lệ</p><p>&emsp;- Đầy đủ và không vi phạm quy định, nhằm nâng cao độ tin cậy và chất lượng thông tin cho **Buyer**.</p><p>- End-user: </p><p>&emsp;- **Inspector** (quản trị viên)</p><p>&emsp;- **Seller** (người bán)</p><p>- Pre-Condition: </p><p>&emsp;- **Seller** đã tạo tin đăng thành công</p><p>&emsp;- Tin đăng đang ở trạng thái **“Chờ duyệt”**</p><p>&emsp;- **Inspector** đã đăng nhập vào hệ thống</p><p>- Post-condition: </p><p>&emsp;- Tin đăng được: </p><p>&emsp;&emsp;- Chuyển sang trạng thái **“Đang bán”** nếu được duyệt</p><p>&emsp;&emsp;- Hoặc **“Bị từ chối”** nếu không đạt yêu cầu</p><p>&emsp;- **Seller** nhận được thông báo kết quả kiểm duyệt</p><p>- Procces: </p><p>&emsp;- **Inspector** đăng nhập vào hệ thống</p><p>&emsp;- **Inspector** truy cập chức năng **“Danh sách tin chờ duyệt”**</p><p>&emsp;- Hệ thống hiển thị danh sách các tin đăng ở trạng thái **“Chờ duyệt”**</p><p>&emsp;- **Inspector** chọn một tin đăng để xem chi tiết</p><p>&emsp;- **Inspector** kiểm tra thông tin tin đăng: </p><p>&emsp;&emsp;- Nội dung mô tả</p><p>&emsp;&emsp;- Giá bán</p><p>&emsp;&emsp;- Hình ảnh</p><p>&emsp;&emsp;- Thông tin xe</p><p>&emsp;- **Inspector** chọn **“Duyệt tin”**</p><p>&emsp;- Hệ thống cập nhật trạng thái tin đăng thành **“Đang bán”**</p><p>&emsp;- Hệ thống gửi thông báo cho Seller</p><p>- Business Rule: </p><p>&emsp;- Chỉ **Inspector** mới có quyền kiểm duyệt tin đăng</p><p>&emsp;- Tin đăng phải có đầy đủ thông tin và hình ảnh hợp lệ</p><p>&emsp;- Tin đăng chỉ hiển thị với Buyer khi ở trạng thái **“Đang bán”**</p><p>- Alternative Flow: </p><p>&emsp;- A1 — Inspector yêu cầu chỉnh sửa/bổ sung (không reject ngay) </p><p>&emsp;&emsp;- Trigger: tin có thể đạt nhưng thiếu thông tin.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- Update status tin: NEED\_MORE\_INFO (hoặc PENDING\_APPROVAL + note)</p><p>&emsp;&emsp;&emsp;- Gửi thông báo cho Seller kèm checklist cần bổ sung</p><p>&emsp;&emsp;- **Seller**: </p><p>&emsp;&emsp;&emsp;- cập nhật tin (text/ảnh)</p><p>&emsp;&emsp;&emsp;- bấm “Gửi lại”</p><p>&emsp;&emsp;- Outcome: tin quay lại PENDING\_APPROVAL.</p><p>&emsp;- A2 — Inspector từ chối (Reject) </p><p>&emsp;&emsp;- Trigger: vi phạm quy định / ảnh không đúng / giá bất thường / nội dung spam.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- status: REJECTED</p><p>&emsp;&emsp;&emsp;- lưu lý do + timestamp + inspectorId</p><p>&emsp;&emsp;&emsp;- notify Seller</p><p>&emsp;&emsp;- Outcome: tin không hiển thị.</p><p>&emsp;- A3 — Re-approve sau khi Seller sửa </p><p>&emsp;&emsp;- Trigger: tin REJECTED hoặc NEED\_MORE\_INFO được **Seller** chỉnh và gửi lại.</p><p>&emsp;&emsp;- System: tạo “version” mới (khuyến nghị) hoặc cập nhật tin và set lại PENDING\_APPROVAL.</p><p>&emsp;&emsp;- Outcome: audit trail rõ ràng.</p><p>&emsp;- E1 — Tin bị xóa/ẩn trong lúc đang duyệt </p><p>&emsp;&emsp;- Trigger: **Seller** xóa/ẩn tin (nếu cho phép).</p><p>&emsp;&emsp;- System: tin chuyển ARCHIVED, tự remove khỏi queue duyệt.</p><p>&emsp;&emsp;- Outcome: **inspector** không duyệt được nữa.</p><p>&emsp;- E2 — Tranh chấp quyền duyệt (2 inspector mở cùng lúc) </p><p>&emsp;&emsp;- System: cơ chế lock “đang xử lý bởi **Inspector** A” trong 10–15 phút.</p><p>&emsp;&emsp;- Outcome: tránh duyệt chồng.</p><p>**BP3 - Tìm kiếm và xem chi tiết tin đăng xe đạp thể thao**</p><p>- Mục tiêu: </p><p>&emsp;- Giúp **Buyer** dễ dàng tìm và lựa chọn xe phù hợp thông qua chức năng tìm kiếm, lọc cơ bản</p><p>&emsp;- Xem chi tiết tin đăng (thông tin xe, hình ảnh, trạng thái kiểm định, uy tín Seller).</p><p>- End-user: </p><p>&emsp;- **Buyer** (người mua)</p><p>&emsp;- **Guest** (khách vãng lai – nếu hệ thống cho phép xem tin mà không cần đăng nhập)</p><p>- Pre-Condition: </p><p>&emsp;- Hệ thống có ít nhất một tin đăng ở trạng thái **“Đang bán”**</p><p>&emsp;- (Nếu yêu cầu đăng nhập) Buyer đã đăng nhập</p><p>- Post-condition: </p><p>&emsp;- **Buyer** xem được danh sách tin phù hợp tiêu chí</p><p>&emsp;- **Buyer** xem được trang chi tiết tin đăng</p><p>&emsp;- **(Tuỳ chọn)** Buyer có thể chuyển sang BP4 (Chat) hoặc BP5 (Đặt mua/đặt cọc) từ trang chi tiết</p><p>- Procces: </p><p>&emsp;- Buyer truy cập trang **Danh sách xe**</p><p>&emsp;- Hệ thống hiển thị các tin đăng ở trạng thái **“Đang bán”**</p><p>&emsp;- Buyer nhập từ khóa tìm kiếm (ví dụ: hãng, model) hoặc chọn bộ lọc: </p><p>&emsp;&emsp;- Khoảng giá</p><p>&emsp;&emsp;- Loại xe</p><p>&emsp;&emsp;- Trạng thái “Đã kiểm định” / “Chưa kiểm định”</p><p>&emsp;- Buyer nhấn **Tìm kiếm/Lọc**</p><p>&emsp;- Hệ thống trả về danh sách tin đăng phù hợp</p><p>&emsp;- Buyer chọn một tin đăng bất kỳ</p><p>&emsp;- Hệ thống hiển thị **chi tiết tin đăng**, bao gồm: </p><p>&emsp;&emsp;- Thông tin xe (loại, hãng, giá, tình trạng, mô tả)</p><p>&emsp;&emsp;- Hình ảnh xe</p><p>&emsp;&emsp;- Trạng thái kiểm định (nếu có)</p><p>&emsp;&emsp;- Thông tin/điểm uy tín Seller (nếu có)</p><p>&emsp;- Buyer có thể chọn: </p><p>&emsp;&emsp;- **Nhắn tin cho Seller** (chuyển BP4)</p><p>&emsp;&emsp;- **Đặt mua/đặt cọc** (chuyển BP5)</p><p>- Business Rule: </p><p>&emsp;- Chỉ tin đăng ở trạng thái **“Đang bán”** mới hiển thị trong kết quả</p><p>&emsp;- Bộ lọc tối thiểu trong MVP: **giá, loại xe, đã kiểm định**</p><p>&emsp;- Trang chi tiết phải hiển thị tối thiểu **3 ảnh** (nếu tin hợp lệ)</p><p>- Alternative Flow: </p><p>&emsp;- A1 — Không có kết quả tìm kiếm </p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- hiển thị “0 kết quả”</p><p>&emsp;&emsp;- Outcome: Buyer vẫn ở BP3.</p><p>&emsp;- A2 — Tin vừa chuyển trạng thái (ACTIVE → HELD/SOLD) khi Buyer đang xem </p><p>&emsp;&emsp;- Trigger: Buyer mở chi tiết, trong lúc đó có giao dịch khác giữ.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- refresh status realtime/when click **CTA** (**Call To Action** **lời kêu gọi hành động** – nút, link hoặc câu chữ **thúc đẩy người dùng thực hiện một hành động cụ thể** trên website/app.)</p><p>&emsp;&emsp;&emsp;- disable “Đặt mua/Đặt cọc” nếu HELD hoặc SOLD</p><p>&emsp;&emsp;- Outcome: không tạo giao dịch lỗi.</p><p>&emsp;- A3 — Guest được xem nhưng bị giới hạn </p><p>&emsp;&emsp;- Nếu bạn cho Guest xem: </p><p>&emsp;&emsp;&emsp;- Guest xem list/detail OK</p><p>&emsp;&emsp;&emsp;- CTA “Đặt mua/Chat” yêu cầu đăng nhập</p><p>&emsp;&emsp;- Outcome: chuyển sang login.</p><p>&emsp;- E1 — Tin thiếu ảnh (data không hợp lệ) </p><p>&emsp;&emsp;- System: không cho hiển thị tin hoặc hiển thị placeholder + log lỗi để admin xử lý.</p><p>&emsp;&emsp;- Outcome: đảm bảo rule “>=3 ảnh” không bị phá vỡ</p><p>**BP4 - Trao đổi thông tin phục vụ kiểm định giữa Inspector và Seller**</p><p>- Mục tiêu: </p><p>&emsp;- Cho phép **Inspector** trao đổi trực tiếp với **Seller** nhằm xác nhận, làm rõ hoặc yêu cầu bổ sung thông tin kỹ thuật của xe đạp trước khi thực hiện đánh giá và kiểm định sản phẩm, đảm bảo tính khách quan và minh bạch cho Buyer.</p><p>- End-user: </p><p>&emsp;- **Seller** (người bán)</p><p>&emsp;- **Inspector** (người kiểm định)</p><p>- Pre-Condition: </p><p>&emsp;- Tin đăng đang ở trạng thái **“Đang bán”** hoặc **“Chờ kiểm định”**</p><p>&emsp;- Tin đăng được gắn cờ cần kiểm định hoặc được **Admin**/ hệ thống chỉ định **Inspector**</p><p>&emsp;- **Inspector** và **Seller** đã đăng nhập hệ thống</p><p>- Post-condition: </p><p>&emsp;- Thông tin cần thiết cho kiểm định được bổ sung đầy đủ</p><p>&emsp;- Inspector có đủ dữ liệu để thực hiện đánh giá và lập báo cáo kiểm định</p><p>&emsp;- Nội dung trao đổi được lưu lại phục vụ truy vết khi cần</p><p>- Procces: </p><p>&emsp;- **Inspector** truy cập danh sách **tin đăng cần kiểm định**</p><p>&emsp;- **Inspector** chọn một tin đăng cụ thể</p><p>&emsp;- Hệ thống hiển thị thông tin tin đăng và chức năng **“Trao đổi với Seller”**</p><p>&emsp;- **Inspector** gửi yêu cầu xác nhận hoặc bổ sung thông tin, ví dụ: </p><p>&emsp;&emsp;- Năm sử dụng thực tế</p><p>&emsp;&emsp;- Lịch sử sửa chữa</p><p>&emsp;&emsp;- Tình trạng khung, truyền động</p><p>&emsp;- **Seller** nhận thông báo và phản hồi **Inspector**</p><p>&emsp;- **Inspector** xem phản hồi và đặt câu hỏi bổ sung (nếu cần)</p><p>&emsp;- Quá trình trao đổi kết thúc khi **Inspector** xác nhận đủ thông tin</p><p>&emsp;- **Inspector** chuyển sang bước **kiểm định và lập báo cáo** (BP5/BP6)</p><p>- Business Rule: </p><p>&emsp;- **Inspector không được trao đổi trực tiếp với Buyer**</p><p>&emsp;- Nội dung trao đổi chỉ phục vụ mục đích kiểm định</p><p>&emsp;- Mỗi cuộc trao đổi gắn với **một tin đăng**</p><p>&emsp;- Nội dung trao đổi được lưu để phục vụ kiểm tra và xử lý tranh chấp</p><p>- Alternative flow: </p><p>&emsp;- A1 — Seller phản hồi chậm / không phản hồi </p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- nhắc nhở sau X giờ/ngày (notification)</p><p>&emsp;&emsp;&emsp;- cho inspector “đóng yêu cầu” với kết luận: “Không đủ thông tin”</p><p>&emsp;&emsp;- Outcome: </p><p>&emsp;&emsp;&emsp;- Inspection status INFO\_INCOMPLETE</p><p>&emsp;&emsp;&emsp;- Tin có thể bị gắn nhãn “Chưa xác minh” (tuỳ rule)</p><p>&emsp;- A2 — Seller từ chối cung cấp thông tin </p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- lưu log nội dung từ chối</p><p>&emsp;&emsp;&emsp;- inspector đánh dấu “Không thể kiểm định”</p><p>&emsp;&emsp;- Outcome: </p><p>&emsp;&emsp;&emsp;- Inspection status FAILED</p><p>&emsp;&emsp;&emsp;- Tin có thể bị gắn nhãn “Từ chối cung cấp thông tin” (tuỳ rule)</p><p>&emsp;- A3 — Inspector yêu cầu bổ sung nhiều vòng </p><p>&emsp;&emsp;- System: cho phép thread Q&A, mỗi message có timestamp, người gửi.</p><p>&emsp;&emsp;- Outcome: traceable, phục vụ dispute.</p><p>&emsp;- E1 — Tin không còn ở trạng thái cho phép kiểm định (Cancel/Archived) </p><p>&emsp;&emsp;- Trigger: tin ARCHIVED.</p><p>&emsp;&emsp;- System: khóa chat kiểm định, chỉ đọc.</p><p>&emsp;&emsp;- Outcome: không phát sinh dữ liệu mới.</p><p>**BP5 - Đặt mua hoặc đặt cọc xe đạp thể thao**</p><p>- Mục tiêu: </p><p>&emsp;- Cho phép **Buyer** thực hiện đặt mua hoặc đặt cọc xe đạp thể thao sau khi đã xem xét đầy đủ thông tin và (nếu có) kết quả kiểm định, nhằm giữ xe và tiến tới hoàn tất giao dịch một cách có kiểm soát và minh bạch.</p><p>- End-user: </p><p>&emsp;- **Buyer** (người mua)</p><p>&emsp;- **Seller** (người bán)</p><p>- Pre-Condition: </p><p>&emsp;- **Buyer** đã đăng nhập hệ thống</p><p>&emsp;- Tin đăng đang ở trạng thái **“Đang bán”**</p><p>&emsp;- **Buyer** đã xem chi tiết tin đăng (BP3)</p><p>&emsp;- Tin đăng đã có kết quả kiểm định</p><p>- Post-condition: </p><p>&emsp;- Một yêu cầu đặt mua/đặt cọc được tạo trong hệ thống</p><p>&emsp;- Trạng thái giao dịch được cập nhật theo phản hồi của Seller</p><p>&emsp;- Tin đăng được tạm giữ hoặc cập nhật trạng thái phù hợp</p><p>- Procces: </p><p>&emsp;- **Buyer** truy cập trang **Chi tiết tin đăng**</p><p>&emsp;- **Buyer** chọn chức năng **“Đặt mua / Đặt cọc”**</p><p>&emsp;- Hệ thống hiển thị thông tin tóm tắt giao dịch: </p><p>&emsp;&emsp;- Thông tin xe</p><p>&emsp;&emsp;- Giá bán</p><p>&emsp;&emsp;- Hình thức: Đặt mua hoặc Đặt cọc</p><p>&emsp;- **Buyer** xác nhận yêu cầu đặt mua/đặt cọc</p><p>&emsp;- Hệ thống tạo đơn giao dịch với trạng thái **“Chờ xác nhận”**</p><p>&emsp;- **Seller** nhận thông báo về yêu cầu giao dịch</p><p>&emsp;- **Seller** xem chi tiết yêu cầu và chọn **“Chấp nhận”**</p><p>&emsp;- Hệ thống cập nhật trạng thái giao dịch thành **“Đã xác nhận”**</p><p>&emsp;- Tin đăng chuyển trạng thái **“Đã được giữ”**</p><p>- Business Rule: </p><p>&emsp;- Mỗi tin đăng chỉ được **một giao dịch “Chờ xác nhận”** tại cùng thời điểm</p><p>&emsp;- **Buyer** chỉ có thể đặt mua/đặt cọc khi đã đăng nhập</p><p>&emsp;- Không xử lý thanh toán thật trong MVP (mock payment)</p><p>&emsp;- Tin đăng ở trạng thái **“Đã được giữ”** không cho phép Buyer khác đặt mua</p><p>- Alternative flow: </p><p>&emsp;- A1 — Buyer hủy yêu cầu khi đang “Chờ xác nhận” </p><p>&emsp;&emsp;- Trigger: Buyer bấm “Hủy yêu cầu”.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- Transaction: CANCELLED</p><p>&emsp;&emsp;&emsp;- Listing vẫn ACTIVE</p><p>&emsp;&emsp;&emsp;- notify Seller</p><p>&emsp;&emsp;- Outcome: giải phóng hàng ngay.</p><p>&emsp;- A2 — Seller không phản hồi trong thời gian quy định (timeout) </p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- Transaction auto CANCELLED (reason: timeout)</p><p>&emsp;&emsp;&emsp;- Listing trở lại ACTIVE</p><p>&emsp;&emsp;&emsp;- notify Buyer and Seller</p><p>&emsp;&emsp;- Outcome: tránh “treo” tin.</p><p>&emsp;- A3 — Một tin chỉ có 1 giao dịch chờ: xử lý Buyer thứ 2 </p><p>&emsp;&emsp;- Trigger: Buyer B tạo yêu cầu khi đã có PENDING\_SELLER\_CONFIRM.</p><p>&emsp;&emsp;- System: </p><p>&emsp;&emsp;&emsp;- chặn tạo giao dịch mới, trả message “Tin đang có người đặt giữ chờ xác nhận”</p><p>&emsp;&emsp;- Outcome: đúng business rule.</p><p>&emsp;- E1 — Listing vừa chuyển HELD/SOLD khi Buyer bấm xác nhận </p><p>&emsp;&emsp;- System: kiểm tra lại status ở server trước khi tạo transaction; nếu không ACTIVE thì fail.</p><p>&emsp;&emsp;- Outcome: tránh race condition.</p><p>&emsp;- E2 — Dữ liệu giá thay đổi (Seller sửa giá) </p><p>&emsp;&emsp;- System: transaction snapshot giá tại thời điểm đặt; nếu seller đổi giá thì yêu cầu đặt mới.</p><p>&emsp;&emsp;- Outcome: minh bạch.</p><p><h4><a name="bp6%e2%80%93ho%c3%a0nt%e1%ba%a5tgiaod%e1%bb%8bchmuab%c3%a1nxe%c4%91%e1%ba%a1pth%e1%bb%83thao"></a>**BP6 – Hoàn tất giao dịch mua bán xe đạp thể thao**</h4></p><p>- Mục tiêu: </p><p>&emsp;- Xác nhận việc giao – nhận xe giữa Seller và Buyer</p><p>&emsp;- Kết thúc vòng đời giao dịch một cách rõ ràng và minh bạch</p><p>&emsp;- Cập nhật trạng thái cuối cùng của tin đăng và giao dịch</p><p>- End-user: </p><p>&emsp;- Buyer (người mua)</p><p>&emsp;- Seller (người bán)</p><p>- Pre-Condition: </p><p>&emsp;- Tồn tại giao dịch ở trạng thái **“Đã xác nhận”** (BP5)</p><p>&emsp;- Tin đăng đang ở trạng thái **“Đã được giữ”**</p><p>&emsp;- Buyer và Seller đã thống nhất hình thức giao hàng và thanh toán **COD**</p><p>&emsp;- Shipper được gán cho giao dịch</p><p>- Post-condition: </p><p>&emsp;- Nếu giao hàng **thành công**: </p><p>&emsp;&emsp;- Giao dịch chuyển sang trạng thái **“Hoàn tất”**</p><p>&emsp;&emsp;- Tin đăng chuyển sang trạng thái **“Đã bán”**</p><p>&emsp;- Nếu giao hàng **thất bại**: </p><p>&emsp;&emsp;- Giao dịch không được hoàn tất</p><p>&emsp;&emsp;- Chuyển sang luồng xử lý hủy / tranh chấp (BP7)</p><p>&emsp;- Lịch sử giao dịch và giao nhận được lưu trong hệ thống</p><p>- Process: </p><p>&emsp;- Seller chuẩn bị xe và thực hiện bàn giao cho Shipper</p><p>&emsp;- Seller cập nhật trạng thái giao dịch: **“Đã đóng gói & bàn giao cho Shipper”**</p><p>&emsp;- Shipper thực hiện giao xe cho Buyer</p><p>&emsp;- Buyer nhận xe, kiểm tra tình trạng thực tế</p><p>&emsp;- Buyer **đồng ý nhận xe và thanh toán COD cho Shipper**</p><p>&emsp;- Shipper truy cập giao diện Shipper và xác nhận: </p><p>&emsp;&emsp;- **“Giao hàng thành công”**</p><p>&emsp;- Hệ thống: </p><p>&emsp;&emsp;- Cập nhật trạng thái giao dịch → **“Hoàn tất”**</p><p>&emsp;&emsp;- Cập nhật trạng thái tin đăng → **“Đã bán”**</p><p>&emsp;&emsp;- Ghi nhận thời điểm hoàn tất và người xác nhận (Shipper)</p><p>- Business Rule: </p><p>&emsp;- **Shipper là người xác nhận hoàn tất giao dịch** khi: </p><p>&emsp;&emsp;- Buyer đã kiểm tra xe</p><p>&emsp;&emsp;- Buyer đồng ý thanh toán COD</p><p>&emsp;- Một giao dịch **chỉ được hoàn tất một lần duy nhất**</p><p>&emsp;- Sau khi giao dịch ở trạng thái **“Hoàn tất”**: </p><p>&emsp;&emsp;- Tin đăng **không được chỉnh sửa**</p><p>&emsp;&emsp;- Không thể tái sử dụng cho giao dịch khác</p><p>&emsp;- Buyer và Seller **không thể tự hoàn tất giao dịch**, chỉ Shipper có quyền xác nhận trạng thái giao hàng</p><p>- Alternative flow: </p><p>&emsp;- A1 - Buyer từ chối nhận xe tại thời điểm giao </p><p>&emsp;&emsp;- Shipper đánh dấu **“Giao hàng thất bại”**</p><p>&emsp;&emsp;- Hệ thống chuyển giao dịch sang **BP7 – Khiếu nại/Tranh chấp**</p><p>&emsp;- A2 - Shipper không giao được (không liên lạc được Buyer, Buyer vắng mặt…) </p><p>&emsp;&emsp;- Shipper chọn lý do thất bại</p><p>&emsp;&emsp;- Giao dịch không hoàn tất, chờ xử lý tiếp (BP7)</p><p>&emsp;- E1 – Buyer từ chối nhận xe khi giao hàng </p><p>&emsp;&emsp;- Nguyên nhân: </p><p>&emsp;&emsp;&emsp;- Xe không đúng mô tả</p><p>&emsp;&emsp;&emsp;- Xe hư hỏng khi vận chuyển</p><p>&emsp;&emsp;&emsp;- Buyer đổi ý</p><p>&emsp;&emsp;- Xử lý: </p><p>&emsp;&emsp;&emsp;- Shipper đánh dấu **“Giao hàng thất bại – Buyer từ chối”**</p><p>&emsp;&emsp;&emsp;- Giao dịch **không chuyển sang “Hoàn tất”**</p><p>&emsp;&emsp;&emsp;- Hệ thống chuyển sang **BP7 – Khiếu nại/Tranh chấp**</p><p>&emsp;- E2 – Buyer không có mặt / không liên lạc được </p><p>&emsp;&emsp;- Nguyên nhân: </p><p>&emsp;&emsp;&emsp;- Buyer vắng mặt</p><p>&emsp;&emsp;&emsp;- Sai thông tin liên hệ</p><p>&emsp;&emsp;- Xử lý: </p><p>&emsp;&emsp;&emsp;- Shipper đánh dấu **“Giao hàng thất bại – Không liên hệ được Buyer”**</p><p>&emsp;&emsp;&emsp;- Giao dịch giữ nguyên trạng thái (chưa hoàn tất)</p><p>&emsp;&emsp;&emsp;- Thông báo cho Seller & Buyer</p><p>&emsp;&emsp;&emsp;- Chờ xử lý tiếp (hẹn giao lại hoặc BP7)</p><p>&emsp;- E3 – Buyer nhận xe nhưng từ chối thanh toán COD </p><p>&emsp;&emsp;- Nguyên nhân: </p><p>&emsp;&emsp;&emsp;- Buyer không đủ tiền</p><p>&emsp;&emsp;&emsp;- Không đồng ý giá</p><p>&emsp;&emsp;- Xử lý: </p><p>&emsp;&emsp;&emsp;- Shipper đánh dấu **“Giao hàng thất bại – Buyer không thanh toán”**</p><p>&emsp;&emsp;&emsp;- Không hoàn tất giao dịch</p><p>&emsp;&emsp;&emsp;- Chuyển sang **BP7**</p><p>Note hỏi cô: Bước hoàn tất giao dịch thì em nên để cho buyer xác nhận trực tiếp sau đó cập nhật trạng thái đơn Thành công và đã thanh toán toàn bộ hay là nên chuyển cái phần confirm của buyer cho shipper để xác nhận confirm đã giao hàng và hoàn tất giao dịch.</p><p><h2><a name="bp7%e2%80%93h%e1%bb%a7ygiaod%e1%bb%8bch%2fkhi%e1%ba%bfun%e1%ba%a1i%e2%80%93tranhch%e1%ba%a5pgiaod%e1%bb%8bch"></a>**BP7 – Hủy giao dịch / Khiếu nại – Tranh chấp giao dịch**</h2></p><p><h3><a name="m%e1%bb%a5cti%c3%aau"></a>**Mục tiêu**</h3></p><p>- Xử lý các trường hợp giao dịch không thể hoàn tất đúng như kỳ vọng</p><p>- Bảo vệ quyền lợi hợp lệ của **Buyer** và **Seller**</p><p>- Cung cấp cơ chế **can thiệp minh bạch, có kiểm soát** từ hệ thống (Admin / Inspector)</p><p>- Đảm bảo **truy vết, audit rõ ràng** cho toàn bộ vòng đời giao dịch</p><p><h3><a name="enduser"></a>**End-user**</h3></p><p>- **Buyer** (người mua – khởi tạo khiếu nại/tranh chấp)</p><p>- **Seller** (người bán – khởi tạo khiếu nại/tranh chấp)</p><p>- **Inspector** (người xử lý tranh chấp – actor nghiệp vụ chính)</p><p>- **Admin** (quản trị hệ thống – can thiệp trong trường hợp đặc biệt)</p><p>Note: Trong BP7, Inspector là actor nghiệp vụ chính chịu trách nhiệm xử lý<br>và đưa ra quyết định cuối cùng cho tranh chấp giao dịch.<br>Admin chỉ tham gia trong vai trò can thiệp/override trong các trường hợp đặc biệt<br>(ví dụ: tranh chấp phức tạp, vi phạm nghiêm trọng, hoặc yêu cầu từ hệ thống),<br>không phải actor nghiệp vụ mặc định.</p><p><h3><a name="precondition"></a>**Pre-condition**</h3></p><p>- Tồn tại giao dịch ở một trong các trạng thái: </p><p>&emsp;- PENDING\_SELLER\_CONFIRM (Chờ xác nhận)</p><p>&emsp;- CONFIRMED</p><p>&emsp;- HELD</p><p>&emsp;- DELIVERY\_FAILED</p><p>- Buyer hoặc Seller phát sinh vấn đề trong quá trình giao dịch</p><p>- Người khởi tạo tranh chấp đã đăng nhập hệ thống</p><p><h3><a name="postcondition"></a>**Post-condition**</h3></p><p>- Giao dịch được: </p><p>&emsp;- **Hủy hợp lệ**</p><p>&emsp;- **Đóng lại** sau khi có quyết định xử lý</p><p>- Tin đăng được cập nhật trạng thái phù hợp: </p><p>&emsp;- Trở lại **ACTIVE (Đang bán)** nếu giao dịch bị hủy</p><p>&emsp;- Hoặc **SOLD (Đã bán)** nếu tranh chấp được giải quyết theo hướng tiếp tục giao dịch</p><p>- Lịch sử khiếu nại / xử lý tranh chấp được **lưu vĩnh viễn** trong hệ thống</p><p><h3><a name="happycase%28lu%e1%bb%93ngch%c3%adnh%e2%80%93x%e1%bb%adl%c3%bdtranhch%e1%ba%a5pth%c3%a0nhc%c3%b4ng%29"></a>**Happy Case (Luồng chính – xử lý tranh chấp thành công)**</h3></p><p>1. Buyer hoặc Seller chọn chức năng **“Khiếu nại / Tranh chấp giao dịch”**</p><p>2. Hệ thống hiển thị form tạo tranh chấp</p><p>3. Người khởi tạo nhập thông tin: </p><p>&emsp;o Lý do khiếu nại (chọn từ danh sách): </p><p>&emsp;&emsp; Không giao xe</p><p>&emsp;&emsp; Xe không đúng mô tả</p><p>&emsp;&emsp; Giao hàng thất bại</p><p>&emsp;&emsp; Từ chối nhận xe</p><p>&emsp;&emsp; Lý do khác</p><p>&emsp;o Mô tả chi tiết</p><p>&emsp;o (Tuỳ chọn) Bằng chứng: hình ảnh, ghi chú</p><p>4. Người khởi tạo xác nhận gửi khiếu nại</p><p>5. Hệ thống: </p><p>&emsp;o Tạo **Dispute** với trạng thái IN\_PROGRESS</p><p>&emsp;o Khóa các hành động giao dịch liên quan</p><p>&emsp;o Gửi thông báo cho Admin / Inspector</p><p>6. Admin / Inspector truy cập **Danh sách tranh chấp**</p><p>7. Admin / Inspector xem: </p><p>&emsp;o Chi tiết giao dịch</p><p>&emsp;o Thông tin tin đăng</p><p>&emsp;o Lịch sử trao đổi (BP4 nếu có)</p><p>&emsp;o Lý do & bằng chứng khiếu nại</p><p>8. Admin / Inspector đưa ra quyết định xử lý</p><p>9. Hệ thống cập nhật: </p><p>&emsp;o Trạng thái giao dịch</p><p>&emsp;o Trạng thái tin đăng</p><p>&emsp;o Trạng thái tranh chấp → RESOLVED</p><p>10. Hệ thống gửi thông báo kết quả cho Buyer và Seller</p><p><h3><a name="businessrule"></a>**Business Rule**</h3></p><p>- Mỗi giao dịch **chỉ được có tối đa 1 tranh chấp đang mở**</p><p>- Chỉ **Admin / Inspector** có quyền đưa ra kết luận cuối cùng</p><p>- Trong thời gian tranh chấp: </p><p>&emsp;- Giao dịch bị **khóa**</p><p>&emsp;- Tin đăng không cho phép giao dịch mới</p><p>- Mọi quyết định xử lý phải được: </p><p>&emsp;- Ghi nhận người xử lý</p><p>&emsp;- Lưu timestamp</p><p>&emsp;- Lưu lý do xử lý</p><p><h3><a name="alternativeflow"></a>**Alternative Flow**</h3></p><p><h4><a name="a1%e2%80%94h%e1%bb%a7ygiaod%e1%bb%8bchkh%c3%b4ngc%e1%ba%a7ntranhch%e1%ba%a5p%28happypathnh%e1%ba%b9%29"></a>**A1 — Hủy giao dịch không cần tranh chấp (happy-path nhẹ)**</h4></p><p>**Trigger:**<br>Buyer hoặc Seller chủ động hủy khi giao dịch còn ở PENDING\_SELLER\_CONFIRM</p><p>**System:**</p><p>- Cập nhật Transaction → CANCELLED</p><p>- Tin đăng → ACTIVE</p><p>- Không tạo Dispute</p><p>**Outcome:**<br>Giải phóng tin nhanh, không cần Admin can thiệp</p><p><h4><a name="a2%e2%80%94tranhch%e1%ba%a5p%c4%91%c6%b0%e1%bb%a3cx%e1%bb%adl%c3%bdtheoh%c6%b0%e1%bb%9bngh%e1%bb%a7ygiaod%e1%bb%8bch"></a>**A2 — Tranh chấp được xử lý theo hướng hủy giao dịch**</h4></p><p>**Trigger:**<br>Admin / Inspector xác định giao dịch không thể tiếp tục</p><p>**System:**</p><p>- Transaction → CANCELLED</p><p>- Listing → ACTIVE</p><p>- Dispute → RESOLVED (Cancelled)</p><p>**Outcome:**<br>Tin được bán lại, kết thúc tranh chấp</p><p><h4><a name="a3%e2%80%94tranhch%e1%ba%a5p%c4%91%c6%b0%e1%bb%a3cx%e1%bb%adl%c3%bdtheoh%c6%b0%e1%bb%9bngti%e1%ba%bfpt%e1%bb%a5cgiaod%e1%bb%8bch"></a>**A3 — Tranh chấp được xử lý theo hướng tiếp tục giao dịch**</h4></p><p>**Trigger:**<br>Admin / Inspector xác định khiếu nại không hợp lệ hoặc đã khắc phục</p><p>**System:**</p><p>- Transaction quay lại trạng thái phù hợp (CONFIRMED hoặc HELD)</p><p>- Listing giữ trạng thái tương ứng</p><p>- Dispute → RESOLVED (Continue)</p><p>**Outcome:**<br>Giao dịch tiếp tục theo BP6</p><p><h4><a name="a4%e2%80%94tranhch%e1%ba%a5pph%c3%a1tsinht%e1%bb%abgiaoh%c3%a0ngth%e1%ba%a5tb%e1%ba%a1i%28bp6%29"></a>**A4 — Tranh chấp phát sinh từ giao hàng thất bại (BP6)**</h4></p><p>**Trigger:**<br>Shipper đánh dấu giao hàng thất bại (Buyer từ chối / không liên lạc được)</p><p>**System:**</p><p>- Tự động tạo Dispute (system-generated)</p><p>- Gán trạng thái IN\_PROGRESS</p><p>- Thông báo Buyer, Seller, Admin</p><p>**Outcome:**<br>Chuyển xử lý sang BP7 không cần thao tác thủ công</p><p><h3><a name="exceptionflow"></a>**Exception Flow**</h3></p><p><h4><a name="e1%e2%80%94t%e1%ba%a1otranhch%e1%ba%a5ptr%c3%b9ng"></a>**E1 — Tạo tranh chấp trùng**</h4></p><p>**Trigger:**<br>User cố tạo tranh chấp khi đã có Dispute IN\_PROGRESS</p><p>**System:**</p><p>- Chặn thao tác</p><p>- Hiển thị thông báo: “Giao dịch đang được xử lý tranh chấp”</p><p>**Outcome:**<br>Đảm bảo rule “1 dispute / transaction”</p><p><h4><a name="e2%e2%80%94giaod%e1%bb%8bchkh%c3%b4ngh%e1%bb%a3pl%e1%bb%87%c4%91%e1%bb%83tranhch%e1%ba%a5p"></a>**E2 — Giao dịch không hợp lệ để tranh chấp**</h4></p><p>**Trigger:**<br>Transaction đã ở trạng thái COMPLETED hoặc CANCELLED</p><p>**System:**</p><p>- Không cho tạo tranh chấp</p><p>- Hiển thị lý do rõ ràng</p><p></p>|
| :- |
Generated at Thu Jan 29 02:12:04 UTC 2026 by Lý Vũ Quốc Huy using Jira 1001.0.0-SNAPSHOT#100290-rev:3f8ec45b30b5cce2e938c1433992773ce463f3be. 
